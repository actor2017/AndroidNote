当上下游在同一个线程中的时候，在下游调用request(n)就会直接改变上游中的requested的值，多次调用request便会叠加这个值，而上游每发送一个事件之后便让这个值-1，当这个值减少至0的时候，继续发送事件便会抛异常了